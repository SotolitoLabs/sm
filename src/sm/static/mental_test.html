<html>
  <head>
  <title>Adapp :: Tamices</title>
  
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <!-- Material Design Bootstrap -->
  <link rel="stylesheet" href="css/mdb.min.css">
  <!-- Your custom styles (optional) -->
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/adapp.css">
  
  
  
  <link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet'>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;800;900&display=swap" rel="stylesheet"> 
  
  <script src="/static/js/jquery.min.js"></script>
  <script src="/static/js/popper.min.js"></script>
<!--  <script src="/static/rest_framework/js/ajax-form.js"></script> -->
  <script src="/static/rest_framework/js/csrf.js"></script>
  <script src="/static/js/bootstrap.min.js"></script>
  <!-- <script src="/static/rest_framework/js/prettify-min.js"></script> -->
  <!-- <script src="/static/rest_framework/js/default.js"></script> -->
  <script src="https://cdn.jsdelivr.net/npm/js-cookie@rc/dist/js.cookie.min.js"></script>

  <!-- Adapp Stuff -->
  <script src="/static/js/jquery.rest.js"></script>
  <script src="/static/js/adapp/default.js"></script>
  <script src="/static/js/adapp/auth.js"></script>
  <!-- /Adapp Stuff -->
  
  
  <style>

  </style>
  
  <!-- DATA -->
  <script language="javascript">
  <!--
 
 
    // Load questions
    $( document ).ready(function() {
      // Get questions
      console.log("Loading questions...");

      client.mental_test_results.read(mental_test_id).done(function( data ) {
        if (data.length <= 0) {
          alert("No hay tamices capturados");
          return;
        }
        if( data[0].test_field === undefined ) {
          for (i = 0; i < data.length; i++) {
            add_question(data[i], 0, i + 1);
          }
        }
        else {
          for (i = 0; i < data.length; i++) {
            add_question(data[i].test_field, data[i].value, i + 1);
          }
        }
        current_user = data[0].current_user;
  
        //Add Questions to DOM
        $("#test-questions").html(questions);
        $("#question-1").addClass('active');
        $("#carousel-indicators").html(indicators);
        current_question = 1;
        total_questions = data.length;
        console.log("questions succesfully loaded" );
        /*console.log("Setting bubbles");
        set_bubbles();*/
      })
      .fail(function(jqxhr, text, error) {
        //TODO: catch errors and show proper message
        console.log("ERROR: " + jqxhr.responseText);
        if(jqxhr.status == 401) {
        alert("ERROR: " + jqxhr.responseText + " Redireccionando");
          //location.href = "/login.html";
        }
        //alert("ERROR: " + jqxhr.responseText);
      });
   
      // Get mental tests
      console.log("Loading Mental Test list...");
      client.mental_test.read().done(function( data ) {
        for (i = 0; i < data.length; i++) {
          add_mental_test(data[i], i);
        }
        $("#progress-bar").html(progress_bar_content);
        $("#test-name").html(current_test_name);
      });
    });
  
  
     // -->
    </script>
    <!-- /DATA -->
  
  
  
  </head>
  <body>
    <div class="sm-header">
        <h1 class="sm-header-title"><img class="sm-header-img" src="/static/img/adapp_logo1.png">&nbsp;adapp</h1><a style="color: black" href="/api/api-auth/logout/?next=/mental_test.html?id=1">Salir</a>
    </div>  


    <div class="sm-slidecontainer">
  
      <!-- START PROGRESS BAR -->
      <ol id="progress-bar" class="sm-progress">
        <li class="is-active" data-step="1">
          Test 1
        </li>
        <li data-step="2">
          Test 2
        </li>
        <li data-step="3">
          Test 3
        </li>    
        <li data-step="4" class="progress__last">
          Test 4
        </li>
      </ol>
      <!-- /FINISH PROGRESS BAR -->
    
  
      <!-- START QUESTIONS -->
      <div class="mt-5 container-fluid">
          <h1 class="sm-test-name-title" id="test-name"><a style="color: black" href="/api/api-auth/login/?next=/mental_test.html?id=1">Login</a></h1>
        <input type="hidden" id="current_user" name="current_user" value="" />

        <form id="mental_test" name="mental_test">
          <div id="test-container" class="row carousel slide" data-interval="false" data-ride="carousel">

          <ol id="carousel-indicators" class="carousel-indicators" style="margin-bottom: -2%">
            <li data-target="#carouselExampleIndicators" data-slide-to="0" class="sm-carousel-indicator active"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="1" class="sm-carousel-indicator"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="2" class="sm-carousel-indicator"></li>
          </ol>



            <div id="test-questions" class="carousel-inner">
                <div class="loading"><img src="/static/img/beta_adapp_buffering-80.gif" /></div>
            </div>


            <a class="carousel-control-prev" href="#test-container" role="button" data-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#test-container" role="button" data-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="sr-only">Next</span>
            </a>


          </div>
          <div class="row">
            <!-- CONTROLS --> 
            <div class="col">
 <!--             <button type="button" id="button_previous" class="sm-button" data-toggle="modal" onClick="show_previous_question()">
                Anterior
              </button>
  
              <button type="button" id="button_next" class="sm-button" data-toggle="modal" onclick="show_next_question()">
                Siguiente
              </button> -->
              <div>
                <button type="button" class="sm-button" data-toggle="modal" onclick="send_mental_test(this.form)">
                  Enviar
                </button>
              </div>
            </div>
            <!-- /CONTROLS -->
          </div>

        </form>

      </div>
      <!-- /END QUESTIONS -->
  
    </div>
  </body>
</html>
